<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Shortify - URL Shortener</title>
        <link rel="stylesheet" href="/css/home.css">
    </head>

    <body>
        <h1>ðŸ”— Shortify - URL Shortener</h1>

        <nav style="text-align: right; margin: 1rem 2rem;">
            <form method="POST" action="/user/logout">
                <button type="submit" style="padding: 6px 12px;">Logout</button>
            </form>
        </nav>


        <% if (locals.id) { %>
            <div class="generated-url">
                <p>
                    Your Generated URL:<br />
                    <a target="_blank" href="http://localhost:3000/url/<%= id %>">
                        http://localhost:3000/url/<%= id %>
                    </a>
                </p>
            </div>
            <% } %>

                <div>
                    <form method="post" action="/url">
                        <label for="url">Enter a Long URL</label>
                        <input type="text" name="url" id="url" placeholder="https://example.com/long-url-path"
                            required />
                        <button type="submit">Generate Short Link</button>
                    </form>
                </div>

                <% if (locals.urls) { %>
                    <div>
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Short ID</th>
                                    <th>Original URL</th>
                                    <th>Clicks</th>
                                    <th>Redirect Link</th>
                                </tr>

                            </thead>
                            <tbody>
                                <% urls.forEach((url, index)=> { %>
                                    <tr>
                                        <td>
                                            <%= index + 1 %>
                                        </td>
                                        <td>
                                            <%= url.shortId %>
                                        </td>
                                        <td><a href="<%= url.redirectUrl %>" target="_blank">
                                                <%= url.redirectUrl %>
                                            </a></td>
                                        <td>
                                            <%= url.visitHistory.length %>
                                        </td>
                                        <td>
                                            <a href="http://localhost:3000/url/<%= url.shortId %>" target="_blank">
                                                http://localhost:3000/url/<%= url.shortId %>
                                            </a>
                                        </td>
                                    </tr>
                                    <% }) %>
                            </tbody>
                        </table>
                    </div>
                    <% } %>
    </body>

</html>